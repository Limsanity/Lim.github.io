<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>rollup打包过程中alias与TS插件顺序引发的问题 | Lim&#39;s Page</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/zelda.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" sizes="192x192" href="/zelda-192.png">
    <meta name="description" content="something about front-end">
    
    <link rel="preload" href="/assets/css/0.styles.8de41c91.css" as="style"><link rel="preload" href="/assets/js/app.750feb0e.js" as="script"><link rel="preload" href="/assets/js/2.51f79b28.js" as="script"><link rel="preload" href="/assets/js/7.25ac0485.js" as="script"><link rel="preload" href="/assets/js/10.c677f95a.js" as="script"><link rel="prefetch" href="/assets/js/100.177f514a.js"><link rel="prefetch" href="/assets/js/101.bd0c4e7f.js"><link rel="prefetch" href="/assets/js/102.cadfa153.js"><link rel="prefetch" href="/assets/js/103.2706f2ae.js"><link rel="prefetch" href="/assets/js/104.59af27a1.js"><link rel="prefetch" href="/assets/js/105.6a8045bd.js"><link rel="prefetch" href="/assets/js/106.bd6e128c.js"><link rel="prefetch" href="/assets/js/107.e8ec64a4.js"><link rel="prefetch" href="/assets/js/108.48c5b40e.js"><link rel="prefetch" href="/assets/js/109.1f3ecd2d.js"><link rel="prefetch" href="/assets/js/11.da07f57e.js"><link rel="prefetch" href="/assets/js/110.59ab3d87.js"><link rel="prefetch" href="/assets/js/111.6e505792.js"><link rel="prefetch" href="/assets/js/112.6805675b.js"><link rel="prefetch" href="/assets/js/113.8351e89e.js"><link rel="prefetch" href="/assets/js/114.f8ae045e.js"><link rel="prefetch" href="/assets/js/12.e3689742.js"><link rel="prefetch" href="/assets/js/13.b519f9a3.js"><link rel="prefetch" href="/assets/js/14.53eebcd6.js"><link rel="prefetch" href="/assets/js/15.1d4304e2.js"><link rel="prefetch" href="/assets/js/16.949c7023.js"><link rel="prefetch" href="/assets/js/17.1ebb059b.js"><link rel="prefetch" href="/assets/js/18.70936c5f.js"><link rel="prefetch" href="/assets/js/19.60e280c9.js"><link rel="prefetch" href="/assets/js/20.acc3b53c.js"><link rel="prefetch" href="/assets/js/21.000f9bfe.js"><link rel="prefetch" href="/assets/js/22.dde14540.js"><link rel="prefetch" href="/assets/js/23.91dc37f8.js"><link rel="prefetch" href="/assets/js/24.3356f787.js"><link rel="prefetch" href="/assets/js/25.5aad8683.js"><link rel="prefetch" href="/assets/js/26.147bad61.js"><link rel="prefetch" href="/assets/js/27.d6e6818f.js"><link rel="prefetch" href="/assets/js/28.89264090.js"><link rel="prefetch" href="/assets/js/29.6fa2b213.js"><link rel="prefetch" href="/assets/js/3.e7a2c18f.js"><link rel="prefetch" href="/assets/js/30.0d23825c.js"><link rel="prefetch" href="/assets/js/31.6a3ff0b7.js"><link rel="prefetch" href="/assets/js/32.ee5614c3.js"><link rel="prefetch" href="/assets/js/33.8b077b7f.js"><link rel="prefetch" href="/assets/js/34.2d88a808.js"><link rel="prefetch" href="/assets/js/35.f1eb02ae.js"><link rel="prefetch" href="/assets/js/36.77d7adb2.js"><link rel="prefetch" href="/assets/js/37.6775800c.js"><link rel="prefetch" href="/assets/js/38.fdd1253f.js"><link rel="prefetch" href="/assets/js/39.c62e28db.js"><link rel="prefetch" href="/assets/js/4.6c56feef.js"><link rel="prefetch" href="/assets/js/40.9054f4e2.js"><link rel="prefetch" href="/assets/js/41.e7b94d57.js"><link rel="prefetch" href="/assets/js/42.b1786a78.js"><link rel="prefetch" href="/assets/js/43.1580e7b7.js"><link rel="prefetch" href="/assets/js/44.65ed8576.js"><link rel="prefetch" href="/assets/js/45.36712ec7.js"><link rel="prefetch" href="/assets/js/46.1ccea627.js"><link rel="prefetch" href="/assets/js/47.13942b71.js"><link rel="prefetch" href="/assets/js/48.19830dcb.js"><link rel="prefetch" href="/assets/js/49.09aa6295.js"><link rel="prefetch" href="/assets/js/5.d17b0055.js"><link rel="prefetch" href="/assets/js/50.df95e7c1.js"><link rel="prefetch" href="/assets/js/51.beb07eea.js"><link rel="prefetch" href="/assets/js/52.f599e852.js"><link rel="prefetch" href="/assets/js/53.63bc005f.js"><link rel="prefetch" href="/assets/js/54.8fca02df.js"><link rel="prefetch" href="/assets/js/55.4add5831.js"><link rel="prefetch" href="/assets/js/56.e5bd1172.js"><link rel="prefetch" href="/assets/js/57.b0ef0d61.js"><link rel="prefetch" href="/assets/js/58.0a727eef.js"><link rel="prefetch" href="/assets/js/59.9bbd5c95.js"><link rel="prefetch" href="/assets/js/6.8308d385.js"><link rel="prefetch" href="/assets/js/60.c5256477.js"><link rel="prefetch" href="/assets/js/61.b2709925.js"><link rel="prefetch" href="/assets/js/62.7f88b67a.js"><link rel="prefetch" href="/assets/js/63.f45cc107.js"><link rel="prefetch" href="/assets/js/64.c2272af3.js"><link rel="prefetch" href="/assets/js/65.aa141d4c.js"><link rel="prefetch" href="/assets/js/66.1a0d0448.js"><link rel="prefetch" href="/assets/js/67.1f8281e9.js"><link rel="prefetch" href="/assets/js/68.4327c5c0.js"><link rel="prefetch" href="/assets/js/69.45c10907.js"><link rel="prefetch" href="/assets/js/70.3057e14c.js"><link rel="prefetch" href="/assets/js/71.5efe1e42.js"><link rel="prefetch" href="/assets/js/72.fc58a760.js"><link rel="prefetch" href="/assets/js/73.5d2dc328.js"><link rel="prefetch" href="/assets/js/74.08d8b949.js"><link rel="prefetch" href="/assets/js/75.f2bb48ad.js"><link rel="prefetch" href="/assets/js/76.96a4273b.js"><link rel="prefetch" href="/assets/js/77.d5877740.js"><link rel="prefetch" href="/assets/js/78.43c99cc0.js"><link rel="prefetch" href="/assets/js/79.bfce4a46.js"><link rel="prefetch" href="/assets/js/8.98216078.js"><link rel="prefetch" href="/assets/js/80.1a4d9abd.js"><link rel="prefetch" href="/assets/js/81.22561592.js"><link rel="prefetch" href="/assets/js/82.ba55ed12.js"><link rel="prefetch" href="/assets/js/83.97fdeadc.js"><link rel="prefetch" href="/assets/js/84.74bc54ee.js"><link rel="prefetch" href="/assets/js/85.86430dd5.js"><link rel="prefetch" href="/assets/js/86.746060ff.js"><link rel="prefetch" href="/assets/js/87.3a394a36.js"><link rel="prefetch" href="/assets/js/88.364afa36.js"><link rel="prefetch" href="/assets/js/89.b01f6f1b.js"><link rel="prefetch" href="/assets/js/9.2f45caf6.js"><link rel="prefetch" href="/assets/js/90.1b8e8891.js"><link rel="prefetch" href="/assets/js/91.1febf461.js"><link rel="prefetch" href="/assets/js/92.92378978.js"><link rel="prefetch" href="/assets/js/93.8fbfafa9.js"><link rel="prefetch" href="/assets/js/94.0cd4c971.js"><link rel="prefetch" href="/assets/js/95.7f7b8f77.js"><link rel="prefetch" href="/assets/js/96.87929228.js"><link rel="prefetch" href="/assets/js/97.87b1c656.js"><link rel="prefetch" href="/assets/js/98.eb84c7b1.js"><link rel="prefetch" href="/assets/js/99.b7d87337.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8de41c91.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Lim's Page</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文" class="mobile-dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Web/" class="nav-link">
  Web
</a></li><li class="dropdown-item"><!----> <a href="/Web2/" class="nav-link router-link-active">
  Web2
</a></li><li class="dropdown-item"><!----> <a href="/EnvironmentSetting/" class="nav-link">
  Environment Setting
</a></li><li class="dropdown-item"><!----> <a href="/Kubernetes/" class="nav-link">
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/Docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/Nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/Sentry/" class="nav-link">
  Sentry
</a></li><li class="dropdown-item"><!----> <a href="/Redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Limsanity" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文" class="mobile-dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Web/" class="nav-link">
  Web
</a></li><li class="dropdown-item"><!----> <a href="/Web2/" class="nav-link router-link-active">
  Web2
</a></li><li class="dropdown-item"><!----> <a href="/EnvironmentSetting/" class="nav-link">
  Environment Setting
</a></li><li class="dropdown-item"><!----> <a href="/Kubernetes/" class="nav-link">
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/Docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/Nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/Sentry/" class="nav-link">
  Sentry
</a></li><li class="dropdown-item"><!----> <a href="/Redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Limsanity" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Web2</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Web2/Cypress.html" class="sidebar-link">Cypress</a></li><li><a href="/Web2/Daily.html" class="sidebar-link">Daily</a></li><li><a href="/Web2/ES6学习笔记.html" class="sidebar-link">ES6学习笔记</a></li><li><a href="/Web2/GraphQL in Action.html" class="sidebar-link">GraphQL in Action</a></li><li><a href="/Web2/JS数据结构与算法.html" class="sidebar-link">JS数据结构与算法</a></li><li><a href="/Web2/JS设计模式与开发实践笔记.html" class="sidebar-link">JS设计模式与开发实践笔记</a></li><li><a href="/Web2/JWT.html" class="sidebar-link">JWT</a></li><li><a href="/Web2/NestJS-Question.html" class="sidebar-link">NestJS Question</a></li><li><a href="/Web2/NestJS.html" class="sidebar-link">NestJS</a></li><li><a href="/Web2/Nginx.html" class="sidebar-link">Nginx</a></li><li><a href="/Web2/Nuxt容器化过程中引发的疑问.html" class="sidebar-link">Nuxt容器化过程中引发的疑问</a></li><li><a href="/Web2/OAuth.html" class="sidebar-link">OAuth</a></li><li><a href="/Web2/PostgreSQL.html" class="sidebar-link">PostgreSQL</a></li><li><a href="/Web2/React.html" class="sidebar-link">React</a></li><li><a href="/Web2/Sentry文档.html" class="sidebar-link">Sentry文档</a></li><li><a href="/Web2/Svelte Component开发初识.html" class="sidebar-link">Svelte Component开发初识</a></li><li><a href="/Web2/Travis CI使用注意事项.html" class="sidebar-link">Travis CI使用注意事项</a></li><li><a href="/Web2/Tree shaking.html" class="sidebar-link">Tree shaking</a></li><li><a href="/Web2/TypeScript-Question.html" class="sidebar-link">TypeScript Question</a></li><li><a href="/Web2/Umi经验总结.html" class="sidebar-link">Umi经验总结</a></li><li><a href="/Web2/XSS防御.html" class="sidebar-link">XSS防御</a></li><li><a href="/Web2/You Don‘t Know JS.html" class="sidebar-link">You Don‘t Know JS</a></li><li><a href="/Web2/lhci-ci集成初探.html" class="sidebar-link">lhci-ci集成初探</a></li><li><a href="/Web2/rollup打包过程中alias与TS插件顺序引发的问题.html" class="active sidebar-link">rollup打包过程中alias与TS插件顺序引发的问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Web2/rollup打包过程中alias与TS插件顺序引发的问题.html#rollup打包过程中alias与ts插件顺序引发的问题" class="sidebar-link">rollup打包过程中alias与TS插件顺序引发的问题</a></li></ul></li><li><a href="/Web2/typescript-handbook学习笔记.html" class="sidebar-link">TypeScript Handbook笔记</a></li><li><a href="/Web2/使用 wrk 进行压测.html" class="sidebar-link">Windows 中使用 wrk 进行压测</a></li><li><a href="/Web2/关于Vue的疑问.html" class="sidebar-link">关于Vue的疑问</a></li><li><a href="/Web2/函数式编程.html" class="sidebar-link">函数式编程</a></li><li><a href="/Web2/微前端.html" class="sidebar-link">微前端</a></li><li><a href="/Web2/快速生成模板文件.html" class="sidebar-link">基于Plop快速生成模板文件</a></li><li><a href="/Web2/模块化和组件化.html" class="sidebar-link">模块化和组件化</a></li><li><a href="/Web2/深入浅出VueJS.html" class="sidebar-link">深入浅出VueJS</a></li><li><a href="/Web2/理解Babel.html" class="sidebar-link">理解Babel</a></li><li><a href="/Web2/理解IOC.html" class="sidebar-link">理解IOC</a></li><li><a href="/Web2/集成lighthouse-ci.html" class="sidebar-link">集成lighthouse-ci</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="rollup打包过程中alias与ts插件顺序引发的问题"><a href="#rollup打包过程中alias与ts插件顺序引发的问题" class="header-anchor">#</a> rollup打包过程中alias与TS插件顺序引发的问题</h2> <h3 id="写在前面"><a href="#写在前面" class="header-anchor">#</a> 写在前面</h3> <ul><li><a href="https://github.com/Limsanity/rollup-alias-ts-repro" target="_blank" rel="noopener noreferrer">repro link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="问题重现"><a href="#问题重现" class="header-anchor">#</a> 问题重现</h3> <div class="language- extra-class"><pre class="language-text"><code>// 当前项目下安装依赖
npm ci
// 运行打包命令
npm run build
</code></pre></div><p>会出现以下报错，意思就是没有引入ts插件导致其无法识别ts文件，但是<code>rollup-config-js</code>中已经引入了ts插件：</p> <p><img src="/assets/img/1.0f18ca1d.png" alt=""></p> <p>如果把<code>main.ts</code>中<code>import Hello from '@/hello.ts'</code>改成<code>import Hello from '@/hello'</code>就可以正常打包；又或者把alias插件顺序移到ts插件之后也可以。</p> <h3 id="问题解析"><a href="#问题解析" class="header-anchor">#</a> 问题解析</h3> <p>这个问题其实是typescript模块解析导致的，接下来具体分析以下整个流程。</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
    <span class="token function">resolveId</span><span class="token punctuation">(</span>importee<span class="token punctuation">,</span> importer<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">transform</span><span class="token punctuation">(</span><span class="token parameter">code<span class="token punctuation">,</span> id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token comment">// 该ts插件有该方法，alias则没有</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面代码是一个resolve插件的基本架构，rollup在解析一个模块时就会逐个调用插件的<code>resolvedId</code>进行解析（如果插件有resolveId的话）。插件的调用顺序和配置文件中的编写顺序有关。我一开始对整个流程的理解是这样的：</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>但是实际上，是这样的：</p> <p><img src="/assets/img/3.4da20933.png" alt=""></p> <p>最终的输出结果其实是由alias插件决定的。alias插件会根据配置规则转化路径，例如该repro中转换成<code>src/hello.ts</code>，然后传给ts插件后ts的模块解析就会出现问题。因为ts的模块解析器会根据根目录的中<code>tsconfig.json</code>的<code>baseUrl</code>配置进行匹配，匹配规则类似node，可见<a href="https://www.tslang.cn/docs/handbook/module-resolution.html" target="_blank" rel="noopener noreferrer">ts模块解析<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。匹配结果如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>failedLookupLocations<span class="token operator">:</span>
<span class="token punctuation">[</span> <span class="token string">'C:/Users/xxx/Desktop/alias/src/hello.ts.ts'</span><span class="token punctuation">,</span>
     <span class="token string">'C:/Users/xxx/Desktop/alias/src/hello.ts.tsx'</span><span class="token punctuation">,</span>
     <span class="token string">'C:/Users/xxx/Desktop/alias/src/hello.ts.d.ts'</span><span class="token punctuation">,</span>
     <span class="token string">'C:/Users/xxx/Desktop/alias/src/hello.ts/package.json'</span><span class="token punctuation">,</span>
     <span class="token string">'C:/Users/xxx/Desktop/alias/src/hello.ts/index.ts'</span><span class="token punctuation">,</span>
     <span class="token string">'C:/Users/xxx/Desktop/alias/src/hello.ts/index.tsx'</span><span class="token punctuation">,</span>
     <span class="token string">'C:/Users/xxx/Desktop/alias/src/hello.ts/index.d.ts'</span><span class="token punctuation">,</span>     <span class="token string">'C:/Users/xxx/Desktop/alias/src/node_modules/src/hello.ts/package.json'</span><span class="token punctuation">,</span>
 <span class="token operator">...</span><span class="token operator">...</span>
<span class="token punctuation">]</span>
</code></pre></div><p>很容易可以看出ts模块解析在路径后面又拼接了<code>.ts</code>后缀，这样就导致文件查找失败，此时ts插件resolve的结果为null。alias插件则会判断回传的结果，如果结果为null，则把原来传入ts插件的<code>src/hello.ts</code>作为输出结果。</p> <p>拿到了输出结果之后就会执行transform步骤：</p> <p><img src="/assets/img/5.fad7ad9e.png" alt=""></p> <p>transform步骤中ts插件会首先判断是否符合默认的includes规则（<code>C:/Users/xxx/Desktop/rollup-alias-ts-repro/*.ts+(|x)</code>或<code>C:/Users/xxx/Desktop/rollup-alias-ts-repro/**/*.ts+(|x)</code>），因为resolve步骤中拿到的是<code>src/hello.ts</code>，不符合includes规则，typescript就不会对代码进行transform，最终出现上述报错。</p> <p>如果把<code>import Hello from '@/home.ts'</code>改成<code>import Hello from '@/home</code>，resolve步骤中ts模块解析就会解析成功，ts解析器将<code>src/home</code>变为<code>src/home.ts</code>，从而得到匹配文件路径，这时候传递给alias的结果则是<code>C:/Users/xxx/Desktop/rollup-alias-ts-repro/src/hello.ts</code>。随后的transform步骤中，该绝对路径符合includes规则，ts会对代码进行transform。</p> <p>如果alias插件移到ts插件之后，对路径映射<code>@</code>处理则由ts插件中调用ts解析器进行完成，其规则根据<code>tsconfig.sjon</code>中path配置决定，该repro中则是将<code>@/*</code>转换成<code>src/*</code>，因此也能正确解析<code>@/hello.ts</code>，依然不会出现报错。</p> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p>总的来说就是alias插件处理完路径映射之后导致ts解析器解析文件失败，对整个流程进行分析有助于熟悉了解rollup工作流程。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Web2/lhci-ci集成初探.html" class="prev">
        lhci-ci集成初探
      </a></span> <span class="next"><a href="/Web2/typescript-handbook学习笔记.html">
        TypeScript Handbook笔记
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.750feb0e.js" defer></script><script src="/assets/js/2.51f79b28.js" defer></script><script src="/assets/js/7.25ac0485.js" defer></script><script src="/assets/js/10.c677f95a.js" defer></script>
  </body>
</html>
