<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS实现轮播图 | Lim&#39;s Page</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/zelda.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" sizes="192x192" href="/zelda-192.png">
    <meta name="description" content="something about front-end">
    
    <link rel="preload" href="/assets/css/0.styles.8de41c91.css" as="style"><link rel="preload" href="/assets/js/app.750feb0e.js" as="script"><link rel="preload" href="/assets/js/2.51f79b28.js" as="script"><link rel="preload" href="/assets/js/15.1d4304e2.js" as="script"><link rel="preload" href="/assets/js/10.c677f95a.js" as="script"><link rel="prefetch" href="/assets/js/100.177f514a.js"><link rel="prefetch" href="/assets/js/101.bd0c4e7f.js"><link rel="prefetch" href="/assets/js/102.cadfa153.js"><link rel="prefetch" href="/assets/js/103.2706f2ae.js"><link rel="prefetch" href="/assets/js/104.59af27a1.js"><link rel="prefetch" href="/assets/js/105.6a8045bd.js"><link rel="prefetch" href="/assets/js/106.bd6e128c.js"><link rel="prefetch" href="/assets/js/107.e8ec64a4.js"><link rel="prefetch" href="/assets/js/108.48c5b40e.js"><link rel="prefetch" href="/assets/js/109.1f3ecd2d.js"><link rel="prefetch" href="/assets/js/11.da07f57e.js"><link rel="prefetch" href="/assets/js/110.59ab3d87.js"><link rel="prefetch" href="/assets/js/111.6e505792.js"><link rel="prefetch" href="/assets/js/112.6805675b.js"><link rel="prefetch" href="/assets/js/113.8351e89e.js"><link rel="prefetch" href="/assets/js/114.f8ae045e.js"><link rel="prefetch" href="/assets/js/12.e3689742.js"><link rel="prefetch" href="/assets/js/13.b519f9a3.js"><link rel="prefetch" href="/assets/js/14.53eebcd6.js"><link rel="prefetch" href="/assets/js/16.949c7023.js"><link rel="prefetch" href="/assets/js/17.1ebb059b.js"><link rel="prefetch" href="/assets/js/18.70936c5f.js"><link rel="prefetch" href="/assets/js/19.60e280c9.js"><link rel="prefetch" href="/assets/js/20.acc3b53c.js"><link rel="prefetch" href="/assets/js/21.000f9bfe.js"><link rel="prefetch" href="/assets/js/22.dde14540.js"><link rel="prefetch" href="/assets/js/23.91dc37f8.js"><link rel="prefetch" href="/assets/js/24.3356f787.js"><link rel="prefetch" href="/assets/js/25.5aad8683.js"><link rel="prefetch" href="/assets/js/26.147bad61.js"><link rel="prefetch" href="/assets/js/27.d6e6818f.js"><link rel="prefetch" href="/assets/js/28.89264090.js"><link rel="prefetch" href="/assets/js/29.6fa2b213.js"><link rel="prefetch" href="/assets/js/3.e7a2c18f.js"><link rel="prefetch" href="/assets/js/30.0d23825c.js"><link rel="prefetch" href="/assets/js/31.6a3ff0b7.js"><link rel="prefetch" href="/assets/js/32.ee5614c3.js"><link rel="prefetch" href="/assets/js/33.8b077b7f.js"><link rel="prefetch" href="/assets/js/34.2d88a808.js"><link rel="prefetch" href="/assets/js/35.f1eb02ae.js"><link rel="prefetch" href="/assets/js/36.77d7adb2.js"><link rel="prefetch" href="/assets/js/37.6775800c.js"><link rel="prefetch" href="/assets/js/38.fdd1253f.js"><link rel="prefetch" href="/assets/js/39.c62e28db.js"><link rel="prefetch" href="/assets/js/4.6c56feef.js"><link rel="prefetch" href="/assets/js/40.9054f4e2.js"><link rel="prefetch" href="/assets/js/41.e7b94d57.js"><link rel="prefetch" href="/assets/js/42.b1786a78.js"><link rel="prefetch" href="/assets/js/43.1580e7b7.js"><link rel="prefetch" href="/assets/js/44.65ed8576.js"><link rel="prefetch" href="/assets/js/45.36712ec7.js"><link rel="prefetch" href="/assets/js/46.1ccea627.js"><link rel="prefetch" href="/assets/js/47.13942b71.js"><link rel="prefetch" href="/assets/js/48.19830dcb.js"><link rel="prefetch" href="/assets/js/49.09aa6295.js"><link rel="prefetch" href="/assets/js/5.d17b0055.js"><link rel="prefetch" href="/assets/js/50.df95e7c1.js"><link rel="prefetch" href="/assets/js/51.beb07eea.js"><link rel="prefetch" href="/assets/js/52.f599e852.js"><link rel="prefetch" href="/assets/js/53.63bc005f.js"><link rel="prefetch" href="/assets/js/54.8fca02df.js"><link rel="prefetch" href="/assets/js/55.4add5831.js"><link rel="prefetch" href="/assets/js/56.e5bd1172.js"><link rel="prefetch" href="/assets/js/57.b0ef0d61.js"><link rel="prefetch" href="/assets/js/58.0a727eef.js"><link rel="prefetch" href="/assets/js/59.9bbd5c95.js"><link rel="prefetch" href="/assets/js/6.8308d385.js"><link rel="prefetch" href="/assets/js/60.c5256477.js"><link rel="prefetch" href="/assets/js/61.b2709925.js"><link rel="prefetch" href="/assets/js/62.7f88b67a.js"><link rel="prefetch" href="/assets/js/63.f45cc107.js"><link rel="prefetch" href="/assets/js/64.c2272af3.js"><link rel="prefetch" href="/assets/js/65.aa141d4c.js"><link rel="prefetch" href="/assets/js/66.1a0d0448.js"><link rel="prefetch" href="/assets/js/67.1f8281e9.js"><link rel="prefetch" href="/assets/js/68.4327c5c0.js"><link rel="prefetch" href="/assets/js/69.45c10907.js"><link rel="prefetch" href="/assets/js/7.25ac0485.js"><link rel="prefetch" href="/assets/js/70.3057e14c.js"><link rel="prefetch" href="/assets/js/71.5efe1e42.js"><link rel="prefetch" href="/assets/js/72.fc58a760.js"><link rel="prefetch" href="/assets/js/73.5d2dc328.js"><link rel="prefetch" href="/assets/js/74.08d8b949.js"><link rel="prefetch" href="/assets/js/75.f2bb48ad.js"><link rel="prefetch" href="/assets/js/76.96a4273b.js"><link rel="prefetch" href="/assets/js/77.d5877740.js"><link rel="prefetch" href="/assets/js/78.43c99cc0.js"><link rel="prefetch" href="/assets/js/79.bfce4a46.js"><link rel="prefetch" href="/assets/js/8.98216078.js"><link rel="prefetch" href="/assets/js/80.1a4d9abd.js"><link rel="prefetch" href="/assets/js/81.22561592.js"><link rel="prefetch" href="/assets/js/82.ba55ed12.js"><link rel="prefetch" href="/assets/js/83.97fdeadc.js"><link rel="prefetch" href="/assets/js/84.74bc54ee.js"><link rel="prefetch" href="/assets/js/85.86430dd5.js"><link rel="prefetch" href="/assets/js/86.746060ff.js"><link rel="prefetch" href="/assets/js/87.3a394a36.js"><link rel="prefetch" href="/assets/js/88.364afa36.js"><link rel="prefetch" href="/assets/js/89.b01f6f1b.js"><link rel="prefetch" href="/assets/js/9.2f45caf6.js"><link rel="prefetch" href="/assets/js/90.1b8e8891.js"><link rel="prefetch" href="/assets/js/91.1febf461.js"><link rel="prefetch" href="/assets/js/92.92378978.js"><link rel="prefetch" href="/assets/js/93.8fbfafa9.js"><link rel="prefetch" href="/assets/js/94.0cd4c971.js"><link rel="prefetch" href="/assets/js/95.7f7b8f77.js"><link rel="prefetch" href="/assets/js/96.87929228.js"><link rel="prefetch" href="/assets/js/97.87b1c656.js"><link rel="prefetch" href="/assets/js/98.eb84c7b1.js"><link rel="prefetch" href="/assets/js/99.b7d87337.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8de41c91.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Lim's Page</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文" class="mobile-dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Web/" class="nav-link router-link-active">
  Web
</a></li><li class="dropdown-item"><!----> <a href="/Web2/" class="nav-link">
  Web2
</a></li><li class="dropdown-item"><!----> <a href="/EnvironmentSetting/" class="nav-link">
  Environment Setting
</a></li><li class="dropdown-item"><!----> <a href="/Kubernetes/" class="nav-link">
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/Docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/Nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/Sentry/" class="nav-link">
  Sentry
</a></li><li class="dropdown-item"><!----> <a href="/Redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Limsanity" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文" class="mobile-dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Web/" class="nav-link router-link-active">
  Web
</a></li><li class="dropdown-item"><!----> <a href="/Web2/" class="nav-link">
  Web2
</a></li><li class="dropdown-item"><!----> <a href="/EnvironmentSetting/" class="nav-link">
  Environment Setting
</a></li><li class="dropdown-item"><!----> <a href="/Kubernetes/" class="nav-link">
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/Docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/Nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/Sentry/" class="nav-link">
  Sentry
</a></li><li class="dropdown-item"><!----> <a href="/Redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Limsanity" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Web</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Web/CSRF和XSS.html" class="sidebar-link">CSRF和XSS</a></li><li><a href="/Web/Docker容器化.html" class="sidebar-link">Docker容器化</a></li><li><a href="/Web/HTML学习笔记.html" class="sidebar-link">HTML学习笔记</a></li><li><a href="/Web/HTTP-HTTPS-HTTP2.0.html" class="sidebar-link">HTTP HTTPS HTTP2.0</a></li><li><a href="/Web/HTTP状态码.html" class="sidebar-link">HTTP状态码</a></li><li><a href="/Web/HTTP缓存.html" class="sidebar-link">HTTP缓存</a></li><li><a href="/Web/JS实现轮播图.html" class="active sidebar-link">JS实现轮播图</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Web/JS实现轮播图.html#原理" class="sidebar-link">原理</a></li><li class="sidebar-sub-header"><a href="/Web/JS实现轮播图.html#构建基本布局" class="sidebar-link">构建基本布局</a></li><li class="sidebar-sub-header"><a href="/Web/JS实现轮播图.html#css样式" class="sidebar-link">CSS样式</a></li><li class="sidebar-sub-header"><a href="/Web/JS实现轮播图.html#逻辑实现" class="sidebar-link">逻辑实现</a></li><li class="sidebar-sub-header"><a href="/Web/JS实现轮播图.html#当鼠标在轮播图上的时候-停止轮播-移开后-恢复轮播" class="sidebar-link">当鼠标在轮播图上的时候，停止轮播；移开后，恢复轮播</a></li><li class="sidebar-sub-header"><a href="/Web/JS实现轮播图.html#手触摸滑动轮播图" class="sidebar-link">手触摸滑动轮播图</a></li></ul></li><li><a href="/Web/JS数组遍历和性能比较.html" class="sidebar-link">JS数组遍历和性能比较</a></li><li><a href="/Web/JS的隐式转换.html" class="sidebar-link">JS的隐式转换</a></li><li><a href="/Web/JS继承的几种方式.html" class="sidebar-link">JS继承的几种方式</a></li><li><a href="/Web/Nginx学习笔记.html" class="sidebar-link">Nginx学习笔记</a></li><li><a href="/Web/PWA、服务端渲染、现代模式构建的集成.html" class="sidebar-link">PWA、服务端渲染、现代模式构建的集成</a></li><li><a href="/Web/PWA学习.html" class="sidebar-link">PWA学习</a></li><li><a href="/Web/Vue中的diff算法.html" class="sidebar-link">Vue中的diff算法</a></li><li><a href="/Web/css学习笔记.html" class="sidebar-link">css学习笔记</a></li><li><a href="/Web/js内存泄漏.html" class="sidebar-link">js内存泄漏</a></li><li><a href="/Web/this的指向.html" class="sidebar-link">this的指向</a></li><li><a href="/Web/webpack常见配置.html" class="sidebar-link">webpack常见配置</a></li><li><a href="/Web/使用chrome进行真机调试.html" class="sidebar-link">使用chrome进行真机调试</a></li><li><a href="/Web/关于css放顶部和js放底部的一些理解.html" class="sidebar-link">关于css放顶部和js放底部的一些理解</a></li><li><a href="/Web/函数柯里化.html" class="sidebar-link">函数柯里化</a></li><li><a href="/Web/图片大小优化.html" class="sidebar-link">图片大小优化</a></li><li><a href="/Web/工具库.html" class="sidebar-link">工具库</a></li><li><a href="/Web/常用命令.html" class="sidebar-link">常用命令</a></li><li><a href="/Web/常用排序算法和应用场景.html" class="sidebar-link">常用排序算法和应用场景</a></li><li><a href="/Web/服务端渲染.html" class="sidebar-link">服务端渲染</a></li><li><a href="/Web/服务端渲染开发记录.html" class="sidebar-link">服务端渲染</a></li><li><a href="/Web/浏览器多进程和js线程.html" class="sidebar-link">浏览器多进程和js线程</a></li><li><a href="/Web/渐进式Web应用PWA.html" class="sidebar-link">渐进式Web应用PWA</a></li><li><a href="/Web/现代模式打包.html" class="sidebar-link">现代模式打包</a></li><li><a href="/Web/用Travis-CI自动部署Vuepress博客.html" class="sidebar-link">用Travis CI自动部署Vuepress博客</a></li><li><a href="/Web/碰到的问题.html" class="sidebar-link">碰到的问题</a></li><li><a href="/Web/网站性能优化.html" class="sidebar-link">网站性能优化</a></li><li><a href="/Web/规范commit信息和lint代码.html" class="sidebar-link">规范commit信息和lint代码</a></li><li><a href="/Web/跨域.html" class="sidebar-link">跨域</a></li><li><a href="/Web/闭包.html" class="sidebar-link">闭包</a></li><li><a href="/Web/项目部署.html" class="sidebar-link">项目部署</a></li><li><a href="/Web/高性能JS.html" class="sidebar-link">高性能JS</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h2> <p><img src="/assets/img/swiper1.f1970eea.png" alt=""></p> <p>当滑动完第三张图片后，紧接着下一张是重复的1。</p> <p><img src="/assets/img/swiper2.392073c7.png" alt=""></p> <p>滑动结束的之后，立刻将最后的1用最前面的1进行替代，从而达到循环轮播的目的。在我的实现中，还包括了用手触摸滑动的功能，可以向左和向右，因此最前面也多出了一张图片3。</p> <h2 id="构建基本布局"><a href="#构建基本布局" class="header-anchor">#</a> 构建基本布局</h2> <div class="language-html extra-class"><pre class="language-html"><code>// swiper.html
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Swiper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>swiper.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">left</span><span class="token punctuation">:</span> -8rem</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>swiper.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这个是基本的html布局，说明一下为什么第一个img的src是3.jpg和最后一个img的src是1.jpg，这是为了循环轮播，后面会给出解释。style=left: -8rem也会再下面的CSS布局中给出解释。接下来先把CSS样式实现一下。</p> <h2 id="css样式"><a href="#css样式" class="header-anchor">#</a> CSS样式</h2> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">html</span> <span class="token punctuation">{</span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 75px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.container</span> <span class="token punctuation">{</span>
	<span class="token property">width</span><span class="token punctuation">:</span> 8rem<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 5.3rem<span class="token punctuation">;</span>
	<span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
	<span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span>
	<span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.wrap</span> <span class="token punctuation">{</span>
	<span class="token property">width</span><span class="token punctuation">:</span> 40rem<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 5.3rem<span class="token punctuation">;</span>
	<span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">img</span> <span class="token punctuation">{</span>
	<span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
	<span class="token property">width</span><span class="token punctuation">:</span> 8rem<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 5.3rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>首先设置了html根元素的font-size为75px，之所以这么设计是因为想采用基于flexible自适应的思想，这和rem这个单位有关系，具体关系可以参考我写的关于rem的文章。简单说一下就是，1rem就等于根元素下设置的font-size的值，即1rem=75px。这样下面的css也很好理解了，首先来看img是浮动的，这是因为我们希望要呈现的图片都在一行，仅通过设置img外层元素wrap的left值来展现不同的图片，记住这里的float目的就是让图片都显示在一行上。width=8rem这个是随意设置的，原先我是设置成600×400大小的图片，后来想实践一下rem的用法，换算一下就是8rem了（600/75），同理height也是，sublime下可以下载cssrem插件，只需要输入px就可以快速得到rem值，不需要每次自己计算。wrap的宽度是5张图片宽度的总和，这样宽度足够，float的元素才能在同一行，height和imgheight一致即可，position为absolute，这是相对于container对应元素而言的，不懂position的也可以参考我的css学习笔记这篇文章。container是最外层的div，width=8rem，这是因为我们希望每次只能看见一张图，所以宽度和一张图片的宽度一致即可，高度也是，overflow: hidden可以将其余的都隐藏起来，margin: auto可以快速实现水平居中，position设置为relative，relative的位置是相对与自身位置而言的，必须要设置该元素的position为relative，否则wrap对应元素的absolute就是基于根元素布局的了。讲到这里就应该能理解上面html文件中，为何style=“left: -8em”了吧，这是因为我们希望从1.jpg开始显示，而3.jpg才是第一个子元素，因此将wrap向左移动一个img的宽度，那么展示的就是1.jpg，即第二个子元素了。不懂的可以一步一步的试着敲一遍代码。</p> <h2 id="逻辑实现"><a href="#逻辑实现" class="header-anchor">#</a> 逻辑实现</h2> <h3 id="定时滚动图片"><a href="#定时滚动图片" class="header-anchor">#</a> 定时滚动图片</h3> <p>这是最基本的要求，用户和轮播图没有任何交互，仅仅是轮播图自己变动。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> wrap <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.wrap&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">setTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">8</span>
		wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">&quot;left, 1s&quot;</span>
		wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> tmp <span class="token operator">+</span> <span class="token string">&quot;rem&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>这个setInterval的作用就是，每隔3秒，将wrap对应的元素的left减去8rem，即一个图像的宽度，以此来显示下一张照片。wrap.style.transition = &quot;left, 1s&quot;就是说关于left属性值的变化，在1s内完成，而不是瞬间就完成，这样字子就可以有一个过渡的效果。可以看到，如果显示到最后一张照片了，我们就应该回到开始，因此添加一下代码：</p> <div class="language-js extra-class"><pre class="language-js"><code>wrap<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'webkitTransitionEnd'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'transition end'</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">8</span> <span class="token operator">+</span> <span class="token string">&quot;rem&quot;</span>
		wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">&quot;left, 0s&quot;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">24</span> <span class="token operator">+</span> <span class="token string">&quot;rem&quot;</span>
		wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">&quot;left, 0s&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>写到这里，可能会有一些疑问，为什么对最后一张图片的处理要放在webkitTransitionEnd事件上呢？放在setInterval上不行吗？代码为什么这么写？看到网上很多轮播图的实现，都是很简单的，有些没有涉及到过渡的效果，有些没有人手滑动的交互（下面我会介绍到），如果要有过渡的效果，那么在setInterval中判断是否达到最后一张图片，然后做出相应的处理时会有一些问题，例如我们这么写：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> wrap <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.wrap&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">setTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">8</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">8</span> <span class="token operator">+</span> <span class="token string">&quot;rem&quot;</span>
            wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">&quot;left, 1s&quot;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">24</span> <span class="token operator">+</span> <span class="token string">&quot;rem&quot;</span>
            wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">&quot;left, 1s&quot;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">&quot;left, 1s&quot;</span>
            wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> tmp <span class="token operator">+</span> <span class="token string">&quot;rem&quot;</span>   
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>这么写的话，就是说，当下一张图片是最后一个子元素1.jpg时，就将wrap.style.left的值置为-8，即显示第二个子元素1.jpg时候的值，那么这个时候就可以不用重复写多一个src为1.jpg的img了（文章一开始产生的疑问），其实这是不正确的，也就是说展示完最后一张图片之后，left值从-24直接变到-8，并且这个过程在1s内完成，这样的话过渡要过就相当于图片从尾向前平移了，大家可以通过上述代码尝试一下，这和我们平时看见的轮播图有些不一样，很不自然，我们希望的时，当播放完最后一张图片时，回到第一张的时候，也和之前的过渡一样。因此就要像先前代码一样，而写在webkitTransitionEnd事件上的原因，其实和实现轮播图的原理有关，回看上述原理分析，我们希望通过在3.jpg后面增加一个1.jpg，这样最后一张图片回到第一张图片的过渡就和之前效果一样了，而不是一个往回平移的过程，但是到最后的1.jpg之后，wrap.style.left就不应该再减8了，而应该变回显示第一张图片（1.jpg）时的值，这样setInterval再减8的时候，才会显示下一张图，从而达到循环轮播。将wrap.style.left的值重置的过程必须放在webkitTransitionEnd中，因为这个时候，transition的过程才完成，你不能在transition之前就进行重置，重置的时候transition: left 0s，这个0s是必须的，因为此时left从-32变为-8这个过程，你是不想让用户进行感知的，-32和-8时，显示的都是1.jpg，所以0s的话，就是说瞬间变换，这样是没有过渡效果的。通过上述解释，再结合文章开头所说的原理，就能弄清楚为什么我们要增加一个重复的图片进行轮播，第一个子元素3.jpg同理，这是用来手动滑动轮播图时，循环用的。</p> <h2 id="当鼠标在轮播图上的时候-停止轮播-移开后-恢复轮播"><a href="#当鼠标在轮播图上的时候-停止轮播-移开后-恢复轮播" class="header-anchor">#</a> 当鼠标在轮播图上的时候，停止轮播；移开后，恢复轮播</h2> <div class="language-js extra-class"><pre class="language-js"><code>wrap<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseover'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'mouse over'</span><span class="token punctuation">)</span>
	<span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

wrap<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseleave'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'mouseleave'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	timer <span class="token operator">=</span> <span class="token function">setTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>这个很简单，只需要为鼠标的over和leave事件绑定回调函数，清除计时器或恢复计时器即可</p> <h2 id="手触摸滑动轮播图"><a href="#手触摸滑动轮播图" class="header-anchor">#</a> 手触摸滑动轮播图</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> startX <span class="token operator">=</span> endX <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token keyword">var</span> position<span class="token punctuation">;</span>
wrap<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'touch start'</span><span class="token punctuation">)</span>
	<span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
	startX <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageX
	position <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

wrap<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchmove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// console.log('touch move')</span>
	endX <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageX
	wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">'left, 0s'</span>
	wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> position <span class="token operator">-</span> <span class="token punctuation">(</span>startX <span class="token operator">-</span> endX<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">75</span> <span class="token operator">+</span> <span class="token string">'rem'</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token operator">-</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">8</span> <span class="token operator">+</span> <span class="token string">'rem'</span>
		position <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
		startX <span class="token operator">=</span> endX
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">24</span> <span class="token operator">+</span> <span class="token string">'rem'</span>
		position <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
		startX <span class="token operator">=</span> endX
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

wrap<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchend'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'touch end'</span><span class="token punctuation">)</span>
	<span class="token comment">// console.log(startX, endX)</span>
	wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">&quot;left, 1s&quot;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>startX <span class="token operator">-</span> endX <span class="token operator">&gt;</span> <span class="token number">100</span> <span class="token operator">&amp;&amp;</span> endX <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> position <span class="token operator">-</span> <span class="token number">8</span> <span class="token operator">+</span> <span class="token string">&quot;rem&quot;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>startX <span class="token operator">-</span> endX <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">100</span> <span class="token operator">&amp;&amp;</span> endX <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> position <span class="token operator">+</span> <span class="token number">8</span> <span class="token operator">+</span> <span class="token string">&quot;rem&quot;</span>
	<span class="token punctuation">}</span>
	timer <span class="token operator">=</span> <span class="token function">setTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	startX <span class="token operator">=</span> endX <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>startX是记录滑动前，手指点击屏幕的位置；endX是移动时，手指点击屏幕的位置；position记录的时开始移动前，wrap.style.left的值。touchstart即滑动开始前，我们需要记录startX的值，并且清除计时器。touchmove则需要我们做的时，移动过程中，手指没有离开的话，轮播图应该移动一定的距离，这是通过wrap.style.left = position - (startX - endX)实现的，要注意设置wrap.style.transition = 'left, 0s'，否则移动的过程中会很难拖动，因为每个变换都需要1s进行完成。紧跟的if else是解决边界问题，这也是个难点，但解决思路和之前循环轮播是一样的，样设置startX = endX，否则，当wrap.stytle.left从-32变成-8之后，startX - endX &gt; 100就会执行下面touchend的逻辑，进行向左移动，这显然是不正确的，可以尝试着更改代码测试一下，这里需要注意的是当滑动的太快时，transitionend事件只有当你停止之后才会触发，在一直滑的过程是不会触发的，因此要在touchmove中处理边界问题。最后就是touchend了，就是结束滑动的时候，我们需要判断一下startX - endX的值，否则移动距离太小可能只是用户无意间的行为，我们不希望进行滑动，还有就是endX为null的判断， 这是因为每次结束后都会对startX和endX进行置null的操作，否则会出现一个bug，就是，当你第一次滑动之后，startX和endX的值会保留，这个时候你点击一下轮播图的位置，会触发touchStart得到新的startX，但是不会触发touchmove，那么这个新的startX就会和旧的endX进行作差，在touchend事件中，进行图片的滑动，因此，为了解决这个bug，我将其置为了null。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Web/HTTP缓存.html" class="prev">
        HTTP缓存
      </a></span> <span class="next"><a href="/Web/JS数组遍历和性能比较.html">
        JS数组遍历和性能比较
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.750feb0e.js" defer></script><script src="/assets/js/2.51f79b28.js" defer></script><script src="/assets/js/15.1d4304e2.js" defer></script><script src="/assets/js/10.c677f95a.js" defer></script>
  </body>
</html>
