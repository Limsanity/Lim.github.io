(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{512:function(s,a,t){"use strict";t.r(a);var e=t(46),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"windows-中使用-wrk-进行压测"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows-中使用-wrk-进行压测"}},[s._v("#")]),s._v(" Windows 中使用 wrk 进行压测")]),s._v(" "),t("p",[s._v("拉取 docker 镜像")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker pull williamyeh/wrk\n")])])]),t("p",[s._v("编写 Lua 脚本")]),s._v(" "),t("div",{staticClass:"language-lua extra-class"},[t("pre",{pre:!0,attrs:{class:"language-lua"}},[t("code",[s._v("wrk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("method "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"POST"')]),s._v("\nwrk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("headers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Content-Type"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"application/json"')]),s._v("\nwrk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"name": "Lim"}\'')]),s._v("\n")])])]),t("p",[s._v("运行压测命令")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker run -it --rm -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%cd%"')]),s._v(":/data williamyeh/wrk -t1 -c400 -d10s -s test.lua http://172.18.61.177:3000/api/user\n")])])]),t("ul",[t("li",[s._v("docker 参数解释\n"),t("ul",[t("li",[t("code",[s._v("--rm")]),s._v("：docker 容器退出后直接删除对应容器")]),s._v(" "),t("li",[t("code",[s._v("-v")]),s._v("："),t("code",[s._v('"%cd%"')]),s._v(" 在 windows 环境中代表当前文件夹路径")])])]),s._v(" "),t("li",[s._v("wrk 参数解释\n"),t("ul",[t("li",[t("code",[s._v("-t")]),s._v("：启动线程数")]),s._v(" "),t("li",[t("code",[s._v("-c")]),s._v("：启动连接数")]),s._v(" "),t("li",[t("code",[s._v("-d")]),s._v("：压测持续时间")]),s._v(" "),t("li",[t("code",[s._v("-s")]),s._v("：使用的 Lua 脚本")])])])])])}),[],!1,null,null,null);a.default=r.exports}}]);