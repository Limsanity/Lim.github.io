(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{431:function(t,s,e){"use strict";e.r(s);var n=e(46),a=Object(n.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"kubernetes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes"}},[t._v("#")]),t._v(" Kubernetes")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("swapoff -a\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /etc/default "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" grup\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("GRUP_CMDLINE_LINUX")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cgroup_enable=memory"')]),t._v("\nupdate-grub2\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("reboot")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"exec-opts"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"native.cgroupdriver=systemd"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" // /etc/docker/daemon.json\nsystemctl daemon-reload\nsystemctl restart docker\n\nswapoff -a\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" systemd-sysv\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("reboot")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" remove virtualbox-6.0\n\nminikube start --vm-driver"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("none --image-repository"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("registry.cn-hangzhou.aliyuncs.com/google_containers\n")])])]),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HTTP_PROXY")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("http://"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("your_host_machine_ip"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".99.1:1087\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NO_PROXY")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("minikube_ip\nminikube start --vm-driver"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("virtualbox\n")])])]),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("kubectl cluster-info\nkubectl version\nkubectl get no\nkubectl run nginx --image"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nginx:1.7.9\nkubectl get deploy\nkubectl get deploy nginx\nkubectl describe deploy nginx\nkubectl get rs\nkubectl describe rs\nkubectl get po\nkubectl get po nginx-b8dcdd49d-44cmk -o wide\nkubectl logs nginx-b8dcdd49d-44cmk\nkubectl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it nginx-b8dcdd49d-44cmk /bin/bash\nkubectl create -f nginx.svc.yaml\nkubectl get svc\nkubectl expose deploy nginx --type"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("NodePort --name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nginx-ext --port"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("\nkubectl delete svc nginx-ext\nkubectl get ep\nkubectl scale deploy nginx --replicas"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\nkubectl get deploy nginx\nkubectl get rs\nkubectl get po\nkubectl get ep\nkubectl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" image deploy nginx "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nginx")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nginx:1.9.1\nkubectl rollout status deploy nginx\nkubectl rollout "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("history")]),t._v(" deploy nginx\nkubectl describe deploy nginx\nkubectl get rs\nkubectl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" image deploy "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nginx")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nginx:1.95 // error\nkubectl rollout "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("history")]),t._v(" deploy nginx\nkubectl rollout "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("history")]),t._v(" deploy nginx --revision"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\nkubectl get rs\nkubectl describe rs nginx-"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("hashstr"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nkubectl get po\nkubectl describe po\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" http://192.168.99.101:30001\nkubectl rollout undo deploy nginx\nkubectl get rs\nkubectl get po\nkubectl get ep\nkubectl delete po nginx-pohashnum\nkubectl get ep\nkubectl get po\n")])])]),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Service\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" http\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8888")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("nodePort")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("30001")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("targetPort")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("selector")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" NodePort\n")])])])])}),[],!1,null,null,null);s.default=a.exports}}]);